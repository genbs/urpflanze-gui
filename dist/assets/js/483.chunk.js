(self.webpackChunk_genbs_urpflanze_gui=self.webpackChunk_genbs_urpflanze_gui||[]).push([[483],{28483:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>_});var t=n(67294),r=n(51512),l=n(6962),p=n(86908),o=n(79340);const i=t.memo((e=>{var a,n;const r={bMatrixRepetitions:!!(null===(a=e.layer)||void 0===a?void 0:a.props.repetitions)&&Array.isArray(null===(n=e.layer)||void 0===n?void 0:n.props.repetitions),bVector:!!e.prop_name&&"multiple-range"===o.Z[e.prop_name].type,bColor:!!e.prop_name&&"color"===o.Z[e.prop_name].type};return t.createElement("div",{style:{width:"100%",height:"100%"}},e.layer&&e.prop_name?t.createElement(p.Z,{options:r,initialReteState:e.initialReteState,setReteAnimation:e.setReteAnimation}):t.createElement("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"}},t.createElement("div",null,"Select layer and prop")))}));var s=n(99011),m=n(76383),u=n(12739),y=n(27722),c=n(63402);const d={position:"absolute",top:0,left:0,padding:m.Z.ms(1)},_=(0,r.$j)((e=>({scene:e.project.scene})))((e=>{var a;const[n,r]=t.useState(null),[p,o]=t.useState(null),[m,_]=t.useState(null),[v,w]=(0,c.Z)("animate",e.scene,e.layer_id,e.prop_name);function f(){if(v.layer&&v.prop_name){const e={raw:`(${u.Z.RAW_ARGUMENTS}) => ${null==n?void 0:n.raw}`,state:null==n?void 0:n.state},a={id:v.layer.id,name:v.prop_name,value:{type:"raw",value:e},prev_value:v.layer.props[v.prop_name]};window.opener.postMessage({event:"set-popup-window-value",value:a},location.origin)}}return t.useEffect((()=>{function e(e){83===e.keyCode&&(0,y.sn)(e)&&(e.preventDefault(),f())}return window.addEventListener("keydown",e,{passive:!1}),()=>window.removeEventListener("keydown",e)}),[null===(a=v.layer)||void 0===a?void 0:a.id,v.layer&&v.prop_name?v.layer.props[v.prop_name]:null,v.prop_name,n]),t.useEffect((()=>{if(v.layer&&v.prop_name&&v.layer.id&&(v.layer.id+"").length>0){const e=v.layer&&v.prop_name&&u.Z.bValueAnimation(v.layer.props[v.prop_name])&&"raw"===v.layer.props[v.prop_name].type?v.layer.props[v.prop_name].value.state:null;_(e)}}),[v.prop_name,v.layer,v.layer.props,v.prop_name?v.layer.props[v.prop_name]:null]),t.createElement("div",{style:{width:"100vw",height:"100vh"}},t.createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},t.createElement("div",{style:d},t.createElement(s.Z,{name:"save",onClick:f,size:2}),t.createElement(s.Z,{name:"copy",size:2,onClick:function(){v.prop_name&&o({prop_name:v.prop_name,value:(null==n?void 0:n.state)||null})}}),t.createElement(s.Z,{name:"paste",disabled:null===p,size:2,onClick:function(){p&&_(p.value)}})),t.createElement(i,{layer:v.layer,prop_name:v.prop_name,initialReteState:m,setReteAnimation:r})),t.createElement(l.Z,{scene:e.scene,layer:v.layer,prop_name:v.prop_name,selectLayer:e=>{w({prop_name:v.prop_name,layer:e})},selectPropName:e=>{w({layer:v.layer,prop_name:e})}}))}))}}]);